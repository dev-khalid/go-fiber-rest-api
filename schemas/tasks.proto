syntax = "proto3";

option go_package = "./generated";

import "google/protobuf/timestamp.proto";

enum TaskType {
  TASK_TYPE_UNSPECIFIED = 0;
  TASK_TYPE_GENERATE_PAYMENT_RECEIPT = 1;
  TASK_TYPE_SEND_EMAIL = 2;
}

enum TaskStatus {
  TASK_STATUS_UNSPECIFIED = 0;
  TASK_STATUS_PENDING = 1;
  TASK_STATUS_IN_PROGRESS = 2;
  TASK_STATUS_COMPLETED = 3;
  TASK_STATUS_FAILED = 4;
  TASK_STATUS_CANCELLED = 5;
}

message Task {
  uint32 id = 1; // @gotag: gorm:"primaryKey"
  string title = 2; // @gotag: validate:"required,min=3,max=255"
  string description = 3; // @gotag: validate:"max=1000"
  TaskStatus status = 4; // @gotag: validate:"omitempty,oneof=pending in_progress completed failed cancelled" gorm:"default:pending"
  TaskType task_type = 5; // @gotag: validate:"omitempty,oneof=generate_payment_receipt send_email" gorm:"default:generate_payment_receipt"
  int32 user_id = 6; // @gotag: validate:"required,gt=0"
  google.protobuf.Timestamp created_at = 7;
  google.protobuf.Timestamp updated_at = 8;
}